<!DOCTYPE html>
<html lang="zh-Hant" xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="UTF-8">
  <title>Plan Order Management</title>
  <link rel="stylesheet" href="https://cdn.datatables.net/2.1.8/css/dataTables.dataTables.css" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.6.0/css/all.min.css"/>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/hamburgers/1.1.3/hamburgers.min.css"/>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" th:href="@{/css/elm.css}" />
  <style>
    .section-title {
      text-align: center;
      margin: 30px 0;
    }
    .section-title h2 {
      font-size: 2rem;
      color: #333;
      margin-bottom: 10px;
    }
    .title-underline {
      height: 3px;
      width: 100px;
      background: #0080ff;
      margin: 10px auto;
    }
    #DataTables_Table_0_wrapper {
      margin: 30px;
    }
    .action-buttons {
      margin: 20px;
      text-align: right;
    }
  </style>
</head>
<body>
<div class="section-title">
  <h2>訂單管理</h2>
  <div class="title-underline"></div>
</div>

<table id="planOrderTable" class="table myTable">
  <thead>
  <tr>
    <th>訂單編號</th>
    <th>會員</th>
    <th>行程價格</th>
    <th>房間價格</th>
    <th>總價格</th>
    <th>訂單日期</th>
    <th>訂單狀態</th>
    <th>付款方式</th>
    <th>操作</th>
  </tr>
  </thead>
  <tbody>
  <tr th:each="order : ${list}" th:object="${order}">
    <td th:text="*{planOrderId}"></td>
    <td th:text="*{memVO.name}"></td>
    <td th:text="*{planPrice}"></td>
    <td th:text="*{roomPrice}"></td>
    <td th:text="*{totalPrice}"></td>
    <td th:text="${#temporals.format(order.orderDate, 'yyyy-MM-dd HH:mm')}"></td>
    <td th:text="${order.orderStat == 0 ? '未付款' : order.orderStat == 1 ? '已付款' : '已取消'}"></td>
    <td th:text="${order.payMethod == 0 ? '信用卡' : order.payMethod == 1 ? '轉帳' : '其他'}"></td>
    <td>
      <a th:href="@{/planord/view/} + *{planOrderId}" class="btn btn-primary btn-sm">
        <i class="fas fa-eye"></i> 查看
      </a>
    </td>
  </tr>
  </tbody>
</table>

<div th:replace="~{back-end/footer :: f}"></div>

<script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
<script src="https://cdn.datatables.net/2.1.8/js/dataTables.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>
<script>
  $(document).ready(function() {
    $("#planOrderTable").DataTable({
      paging: true,
      ordering: true,
      pageLength: 5,
      lengthMenu: [5, 10, 15, 20],
      searching: true,
      language: {
        info: "顯示第 _START_ 至 _END_ 筆資料，共 _TOTAL_ 筆",
        infoEmpty: "無資料可顯示",
        infoFiltered: "",
        zeroRecords: "請確認查詢條件",
        lengthMenu: "每頁顯示 _MENU_ 筆資料",
        search: "搜尋：",
        paginate: {
          first: "第一頁",
          previous: "上一頁",
          next: "下一頁",
          last: "最後一頁"
        }
      }
    });
  });
</script>
</body>
</html>